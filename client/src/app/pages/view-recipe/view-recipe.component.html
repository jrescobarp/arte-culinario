<app-navbar
[user]="user$"
[showProfileDropdown]="true"
></app-navbar>

<div class="container mainContainer">
  <div class="row">
    <div class="col-12 row mt-3" style="padding-right: 0px;">
      <div [ngClass]="isMobile ? 'recipeNameMobile col-10' : 'recipeNameFull col-9'">{{recipe.value.name}}</div>
      <div class="col" style="padding-top: .4em;text-align: right;padding-right: 0em;">
        <button *ngIf="userInfo && !isFavorite" class="btn btn-sm btn-red btn-red-title" style="margin-top: -.25em;" matTooltip="agregar a favoritos" [matTooltipPosition]="'above'" (click)="addRecipeToFavorites()"><i class="fa-solid fa-plus"></i></button>
        <button *ngIf="userInfo && isFavorite" class="btn btn-sm btn-red btn-red-title" style="margin-top: -.25em;" matTooltip="borrar de favoritos" [matTooltipPosition]="'above'" (click)="removeRecipeFromFavorites()"><i class="fa-solid fa-minus"></i></button>
        <!-- <button *ngIf="!userInfo" class="btn btn-sm btn-red btn-red-title" style="margin-top: -.25em;" matTooltip="inicia sesion para agregar a lista de recetas favoritas" [matTooltipPosition]="'above'" >
          <i class="fa-solid fa-plus"></i>
        </button> -->
        <button class="btn btn-sm btn-green" matTooltip="copiar todo texto" [matTooltipPosition]="'above'" (click)="copyToClipboard('all')"  style="margin-top: -.25em;margin-left: 1em;">
          <i class="fa-regular fa-clipboard"></i>
        </button>
      </div>
    </div>

    <div class="mainImgCarousel" [ngClass]="isMobile ? 'col-12' : 'col-7'">
      <!-- <div *ngIf="recipe.value.images.length" id="imgCarousel" class="carousel slide">
        <div class="carousel-inner">
          <div class="carousel-item carouselDiv" *ngFor="let img of recipe.value.images;let index = index;let isFirst = first" [ngClass]="{active:isFirst}">
            <img src="{{img}}" class="d-block w-100" alt="...">
          </div>
        </div>
        <div class="pt-1"><a href="">Add your own for everyone to see!</a></div>
        <button class="carousel-control-prev" type="button" data-bs-target="#imgCarousel" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#imgCarousel" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>

      <div *ngIf="!recipe.value.images.length" class="text-center" style="font-size: .9em;">
        <i class="fa-solid fa-kitchen-set fa-2xl noImgIcon"></i>
        <div class="pt-3">No images available for this recipe.</div>
        <div class="pt-1"><a href="">Add your own for everyone to see!</a></div>
      </div> -->
      <app-image-display
          [images]="recipe.value.images"
          [isMobile]="isMobile"
          [recipe_id]="recipe.value._id!"
          [recipe_name]="recipe.value.name"
      ></app-image-display>
    </div>

    <div class="ingrDiv my-4" [ngClass]="isMobile ? 'col-12' : 'col-5'" style="background-color: white;">
      <div class="row">
        <div class="col-8 mt-2" style="font-size: 1em;">Ingredientes:</div>
        <div class="col-4" style="text-align: right;">
          <button class="btn btn-sm btn-green" matTooltip="copiar texto" [matTooltipPosition]="'above'" (click)="copyToClipboard('ingredients')"><i class="fa-regular fa-clipboard"></i></button>
        </div>
      </div>
      <ul>
        <li *ngFor="let ingredient of recipe.value.ingredients ; let i = index" style="font-size: .8em;">
          {{ingredient}}
        </li>
      </ul>
    </div>

    <div class="col-12 stepsDiv my-3" style="background-color: white;">
      <div class="row mt-2">
        <div class="col-8" style="font-size: 1em;">Instrucciones:</div>
        <div class="col-4" style="text-align: right;">
          <button class="btn btn-sm mt-0 btn-green" matTooltip="copiar texto" [matTooltipPosition]="'above'" (click)="copyToClipboard('steps')"><i class="fa-regular fa-clipboard"></i></button>
        </div>
      </div>
      <ol>
        <li *ngFor="let step of recipe.value.steps ; let i = index" style="font-size: .8em;">
          {{step}}
        </li>
      </ol>
    </div>

    <div class="col-12 my-3 px-0">
      <app-comments-section
        [comments_arr]="recipe.value.comments"
        [userInfo]="userInfo"
        [parentObject]="recipe.value"
        [parentType] = "'recipe'"
      ></app-comments-section>
    </div>
  </div>
</div>

<app-footer></app-footer>
